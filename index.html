<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ูููุฐุฌ ุทูุจ ุฑุตูุฏ ุฑููู</title>
  <!-- ุชุญููู ููุชุจุงุช React ู ReactDOM ูู CDN -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <!-- ุชุญููู Babel ูุชุญููู ููุฏ JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- ุชุญููู Tailwind CSS ูู CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ุชุญุฏูุฏ ุฎุท Inter ูุฎุท ุฃุณุงุณู ูุฌููุน ุงูุนูุงุตุฑ */
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body>
  <!-- ูุฐุง ุงูุนูุตุฑ ูู ุงูุฐู ุณูุชู ููู ุนุฑุถ ุชุทุจูู React -->
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // ูุฐุง ูู ุงููููู ุงูุฑุฆูุณู ููุชุทุจููุ ููู ูุชููู ุฌููุน ุนูููุงุช ุงููุงุฌูุฉ ูุฅุฏุงุฑุฉ ุงูุจูุงูุงุช.
    const App = () => {
      // `formData`: ุญุงูุฉ (state) ูุชุฎุฒูู ุฌููุน ุงูุจูุงูุงุช ุงููุฏุฎูุฉ ูู ุงููููุฐุฌ.
      const [formData, setFormData] = useState({
        balance_type: '',
        crypto_name: '',
        crypto_network: '',
        wallet_name: '',
        wallet_currency: '',
        amount_requested: 0,
        service_fee_value: 0,
        receiver_address: '',
        notes: '',
        payment_method: '',
        payment_currency: 'ุฑูุงู ุณุนูุฏู',
        final_amount_due_usd: 0,
        final_amount_due_converted: 0,
      });

      // ุญุงูุงุช (states) ุฅุถุงููุฉ ูุฅุฏุงุฑุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู.
      const [formSubmitted, setFormSubmitted] = useState(false);
      const [isSubmitting, setIsSubmitting] = useState(false);
      const [orderId, setOrderId] = useState('');
      const [cryptoPrices, setCryptoPrices] = useState({
        BTC: 60000,
        ETH: 3000,
        SOL: 150
      });
      const [isPriceLoading, setIsPriceLoading] = useState(false);

      // ุฃุณุนุงุฑ ุงูุตุฑู ุงูุซุงุจุชุฉ ูุบุฑุถ ุงูุนุฑุถ.
      const exchangeRates = {
        'ุฑูุงู ุณุนูุฏู': 3.83,
        'ุฑูุงู ูููู ุดูุงู': 538,
        'ุฑูุงู ูููู ุฌููุจ': 2000,
      };
      
      // ุฑุจุท ุฃุณูุงุก ุงูุนููุงุช ุจุฑููุฒูุง ูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API).
      const cryptoSymbolMap = {
        'Bitcoin': 'BTC',
        'Ethereum': 'ETH',
        'Solana': 'SOL',
        'USDT': 'USDT'
      };

      // `useEffect`: ุฎุทุงู (hook) ููุณุชุฎุฏู ูุฌูุจ ุฃุณุนุงุฑ ุงูุนููุงุช ุงูุฑูููุฉ ุนูุฏ ุชุญููู ุงูุชุทุจูู.
      // ููุง ูููู ุจุชุญุฏูุซ ุงูุฃุณุนุงุฑ ูู 60 ุซุงููุฉ.
      useEffect(() => {
        // ูุธููุฉ ูุฌูุจ ุงูุฃุณุนุงุฑ ูู CryptoCompare.
        const fetchAllCryptoPrices = async () => {
          setIsPriceLoading(true);
          const baseUrl = 'https://min-api.cryptocompare.com/data/pricemulti';
          const params = { "fsyms": "BTC,ETH,SOL", "tsyms": "USDT" };
          const url = new URL(baseUrl);
          url.search = new URLSearchParams(params).toString();
          
          try {
            const response = await fetch(url);
            const data = await response.json();
            if (data) {
              setCryptoPrices({
                BTC: data.BTC ? data.BTC.USDT : cryptoPrices.BTC,
                ETH: data.ETH ? data.ETH.USDT : cryptoPrices.ETH,
                SOL: data.SOL ? data.SOL.USDT : cryptoPrices.SOL
              });
            }
          } catch (error) {
            console.error('ูุดู ุฌูุจ ุฃุณุนุงุฑ ุงูุนููุงุช ุงูุฑูููุฉ ูู CryptoCompare:', error);
          } finally {
            setIsPriceLoading(false);
          }
        };

        fetchAllCryptoPrices();
        const interval = setInterval(fetchAllCryptoPrices, 60000);
        return () => clearInterval(interval);
      }, []);

      // ูุธููุฉ ูุญุณุงุจ ุฑุณูู ุงูุฎุฏูุฉ ุจูุงุกู ุนูู ุงููููุฉ ูููุน ุงูุนููุฉ.
      const calculateServiceFee = (amount, cryptoName, cryptoPrice) => {
        const specialFeeCryptos = ['Bitcoin', 'Solana', 'Ethereum'];

        if (specialFeeCryptos.includes(cryptoName)) {
          const dollarValue = amount * cryptoPrice;
          return dollarValue * 0.06;
        }

        if (amount < 10) {
          return 2;
        } else if (amount <= 50) {
          return 2.5;
        } else if (amount <= 1000) {
          return amount * 0.05;
        } else {
          return amount * 0.045;
        }
      };

      // `useEffect`: ุฎุทุงู ููุนูุฏ ุญุณุงุจ ุงููุจุงูุบ ุงูููุงุฆูุฉ ุชููุงุฆูุงู ุนูุฏ ุชุบููุฑ ุฃู ุญูู ุฐู ุตูุฉ.
      useEffect(() => {
        const updatedAmount = parseFloat(formData.amount_requested);
        const updatedPaymentCurrency = formData.payment_currency;
        
        let currentCryptoPrice = 1;
        const cryptoSymbol = cryptoSymbolMap[formData.crypto_name];
        if (cryptoSymbol === 'USDT') {
          currentCryptoPrice = 1;
        } else if (cryptoSymbol && cryptoPrices[cryptoSymbol]) {
          currentCryptoPrice = cryptoPrices[cryptoSymbol];
        }

        const fee = calculateServiceFee(updatedAmount, formData.crypto_name, currentCryptoPrice);

        const amounts = calculateFinalAmount(updatedAmount, fee, currentCryptoPrice, updatedPaymentCurrency);

        setFormData(prev => ({
          ...prev,
          service_fee_value: fee,
          final_amount_due_usd: amounts.totalUSD,
          final_amount_due_converted: amounts.convertedAmount,
        }));
      }, [formData.amount_requested, formData.payment_currency, formData.crypto_name, cryptoPrices]);

      // ูุธููุฉ ุญุณุงุจ ุงููุจูุบ ุงูููุงุฆู.
      const calculateFinalAmount = (amount, fee, currentCryptoPrice, paymentCurrency) => {
        const totalUSD = (amount * currentCryptoPrice) + fee;
        const convertedAmount = paymentCurrency === 'ุฏููุงุฑ ุฃูุฑููู' ? totalUSD : totalUSD * (exchangeRates[paymentCurrency] || 1);
        return {
          totalUSD: totalUSD,
          convertedAmount: convertedAmount,
        };
      };

      // `handleInputChange`: ูุธููุฉ ูุชุญุฏูุซ ุญุงูุฉ ุงููููุฐุฌ ุนูุฏ ุฅุฏุฎุงู ุงูุจูุงูุงุช ูู ุงูุญููู.
      const handleInputChange = (e) => {
        const { name, value } = e.target;
        let newFormData = { ...formData, [name]: value };

        if (name === 'balance_type') {
          newFormData = {
            ...newFormData,
            crypto_name: '',
            crypto_network: '',
            wallet_name: '',
            wallet_currency: '',
          };
        }

        setFormData(newFormData);
      };

      // `handleSubmit`: ูุธููุฉ ููุนุงูุฌุฉ ุฅุฑุณุงู ุงููููุฐุฌ.
      // ุชู ุชุนุฏูู ูุฐู ุงููุธููุฉ ูุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ูุงุฌูุฉ API ุจุฏูุงู ูู Firebase.
      const handleSubmit = async (e) => {
        e.preventDefault();
        setIsSubmitting(true);
        
        try {
          // ูู ุจุงุณุชุจุฏุงู 'https://your-backend-api.com/submit' ุจููุทุฉ ููุงูุฉ ุงูุฎุงุฏู ุงูุฎุงุต ุจู.
          // ูุฌุจ ุฃู ูููู ุฎุงุฏูู ูุจุฑูุฌุงู ูุงุณุชูุจุงู ูุฐู ุงูุจูุงูุงุช ููุนุงูุฌุชูุง.
          // ูููู ุงุณุชุฎุฏุงู Node.js ูุน Expressุ ุฃู Python ูุน Flaskุ ุฃู ุฃู ูุบุฉ ุฃุฎุฑู.
          const response = await fetch('https://topup-back.onrender.com/submit', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData),
          });

          if (!response.ok) {
            throw new Error(`ุฎุทุฃ ูู ุงูุดุจูุฉ: ${response.statusText}`);
          }
          
          const result = await response.json();
          // ููุง ููููู ุงุณุชุฎุฏุงู ุฑูู ุงูุทูุจ ุงูุฐู ูุนูุฏู ุงูุฎุงุฏู.
          setOrderId(result.orderId || 'ุบูุฑ ูุชููุฑ');
          setFormSubmitted(true);
          console.log('ุชู ุฅุฑุณุงู ุงูุทูุจ ุจูุฌุงุญ:', result);

        } catch (e) {
          console.error("ูุดู ุฅุฑุณุงู ุงูุทูุจ:", e);
          // ููููู ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ูููุณุชุฎุฏู ููุง
        } finally {
          setIsSubmitting(false);
        }
      };

      // ูุธููุฉ ููุดุงุฑูุฉ ุชูุงุตูู ุงูุทูุจ ุนูู ูุงุชุณุงุจ.
      const handleShare = () => {
        const shareText = `*ุชู ุฅุฑุณุงู ุทูุจ ุฌุฏูุฏ!*
-----------------------------
*ุฑูู ุงูุทูุจ:* ${orderId}
*ููุน ุงูุฑุตูุฏ:* ${formData.balance_type === 'crypto' ? formData.crypto_name : formData.wallet_name}
*ุงููููุฉ:* ${formData.amount_requested}
*ุงูุฑุณูู:* ${formData.service_fee_value.toFixed(2)} USD
*ุงููุจูุบ ุงูููุงุฆู:* ${formData.final_amount_due_converted.toFixed(2)} ${formData.payment_currency}`;
        const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareText)}`;
        window.open(whatsappUrl, '_blank');
      };

      // ุฏูุงู ูุณุงุนุฏุฉ ูุชูุฏูู ุฃูุณุงู ุงููููุฐุฌ ุจูุงุกู ุนูู ููุน ุงูุฑุตูุฏ.
      const renderCryptoSection = () => (
        <div className="space-y-4">
          <div className="p-4 bg-gray-50 rounded-lg">
            <label className="block text-sm font-medium text-gray-700 mb-1">ูุง ุงุณู ุงูุนููุฉ ุงูุฑูููุฉุ</label>
            <select
              name="crypto_name"
              value={formData.crypto_name}
              onChange={handleInputChange}
              className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"
            >
              <option value="">ุงุฎุชุฑ...</option>
              <option value="USDT">USDT</option>
              <option value="Bitcoin">Bitcoin</option>
              <option value="Solana">Solana</option>
              <option value="Ethereum">Ethereum</option>
              <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
            </select>
          </div>
          <div className="p-4 bg-gray-50 rounded-lg">
            <label className="block text-sm font-medium text-gray-700 mb-1">ูุง ูู ุงูุดุจูุฉ ุงููุทููุจุฉุ</label>
            <select
              name="crypto_network"
              value={formData.crypto_network}
              onChange={handleInputChange}
              className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"
            >
              <option value="">ุงุฎุชุฑ...</option>
              <option value="BEP20">BEP20</option>
              <option value="TRC20">TRC20</option>
              <option value="ERC20">ERC20</option>
              <option value="Solana">Solana</option>
              <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
            </select>
          </div>
          {(formData.crypto_name === 'Bitcoin' || formData.crypto_name === 'Solana' || formData.crypto_name === 'Ethereum') && (
            <div className="p-4 bg-yellow-50 rounded-lg text-sm text-yellow-800">
              {isPriceLoading ? (
                <p>ุฌุงุฑู ุฌูุจ ุงูุณุนุฑ...</p>
              ) : (
                <p>ุงูุณุนุฑ ุงูุญุงูู ูู {formData.crypto_name}: ~{cryptoPrices[cryptoSymbolMap[formData.crypto_name]]?.toFixed(2)} ุฏููุงุฑ ุฃูุฑููู</p>
              )}
            </div>
          )}
        </div>
      );

      const renderWalletSection = () => (
        <div className="space-y-4">
          <div className="p-4 bg-gray-50 rounded-lg">
            <label className="block text-sm font-medium text-gray-700 mb-1">ูุง ุงุณู ุงููุญูุธุฉุ</label>
            <select
              name="wallet_name"
              value={formData.wallet_name}
              onChange={handleInputChange}
              className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"
            >
              <option value="">ุงุฎุชุฑ...</option>
              <option value="PayPal">PayPal</option>
              <option value="Neteller">Neteller</option>
              <option value="Skrill">Skrill</option>
              <option value="Perfect Money">Perfect Money</option>
              <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
            </select>
          </div>
          <div className="p-4 bg-gray-50 rounded-lg">
            <label className="block text-sm font-medium text-gray-700 mb-1">ุงูุนููุฉ ุฏุงุฎู ุงููุญูุธุฉุ</label>
            <select
              name="wallet_currency"
              value={formData.wallet_currency}
              onChange={handleInputChange}
              className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"
            >
              <option value="">ุงุฎุชุฑ...</option>
              <option value="USD">USD</option>
              <option value="EUR">EUR</option>
              <option value="GBP">GBP</option>
              <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
            </select>
          </div>
        </div>
      );

      // ุฅุฐุง ุชู ุฅุฑุณุงู ุงููููุฐุฌ ุจูุฌุงุญุ ูุชู ุนุฑุถ ุฑุณุงูุฉ ุงูุชุฃููุฏ.
      if (formSubmitted) {
        return (
          <div className="min-h-screen bg-gray-100 flex items-center justify-center p-4">
            <div className="max-w-md w-full bg-white p-8 rounded-xl shadow-lg border border-gray-200 text-right font-sans">
              <h2 className="text-2xl font-bold text-gray-900 text-center mb-6">ุชู ุงุณุชูุงู ุทูุจู ุจูุฌุงุญ!</h2>
              <div className="space-y-4 text-gray-700">
                <p><strong>ุฑูู ุงูุทูุจ:</strong> {orderId}</p>
                <p><strong>ููุน ุงูุฑุตูุฏ:</strong> {formData.balance_type}</p>
                {formData.balance_type === 'crypto' && (
                  <>
                    <p><strong>ุงูุนููุฉ ุงูุฑูููุฉ:</strong> {formData.crypto_name}</p>
                    <p><strong>ุงูุดุจูุฉ:</strong> {formData.crypto_network}</p>
                  </>
                )}
                {formData.balance_type === 'wallet' && (
                  <>
                    <p><strong>ุงุณู ุงููุญูุธุฉ:</strong> {formData.wallet_name}</p>
                    <p><strong>ุนููุฉ ุงููุญูุธุฉ:</strong> {formData.wallet_currency}</p>
                  </>
                )}
                <p><strong>ุงููููุฉ ุงููุทููุจุฉ:</strong> {formData.amount_requested}</p>
                <p><strong>ุฑุณูู ุงูุฎุฏูุฉ:</strong> {formData.service_fee_value.toFixed(2)} USD</p>
                <p><strong>ุนููุงู ุงูุงุณุชูุงู:</strong> {formData.receiver_address}</p>
                <p><strong>ุงูููุงุญุธุงุช:</strong> {formData.notes || 'ูุง ุชูุฌุฏ'}</p>
                <p><strong>ุทุฑููุฉ ุงูุฏูุน:</strong> {formData.payment_method}</p>
                <p><strong>ุนููุฉ ุงูุฏูุน:</strong> {formData.payment_currency}</p>
                <p><strong>ุงููุจูุบ ุงูููุงุฆู ุงููุทููุจ ุฏูุนู (ุจุงูุฏููุงุฑ):</strong> {formData.final_amount_due_usd.toFixed(2)} USD</p>
                <p><strong>ุงููุจูุบ ุงูููุงุฆู ุงููุทููุจ ุฏูุนู (ุจุงูุนููุฉ ุงููุญููุฉ):</strong> {formData.final_amount_due_converted.toFixed(2)} {formData.payment_currency}</p>
              </div>
              <button
                onClick={handleShare}
                className="mt-6 w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition duration-150 ease-in-out"
              >
                ูุดุงุฑูุฉ ุนูู ูุงุชุณุงุจ
              </button>
              <p className="mt-6 text-sm text-center text-gray-500">
                ุณูุชู ุงูุชูุงุตู ูุนู ูุฑูุจุงู ูุฅุชูุงู ุนูููุฉ ุงูุฏูุน.
              </p>
            </div>
          </div>
        );
      }

      // ูุฐุง ูู ูุญุชูู ุงููููุฐุฌ ุงูุฑุฆูุณู
      return (
        <div dir="rtl" className="min-h-screen bg-gray-100 flex items-center justify-center p-4 sm:p-6 lg:p-8">
          <form onSubmit={handleSubmit} className="max-w-md w-full bg-white p-6 sm:p-8 rounded-xl shadow-lg border border-gray-200 space-y-6 font-sans">
            <h1 className="text-3xl font-bold text-gray-900 text-center">ุทูุจ ุดุญู ุฑุตูุฏ ุฑููู</h1>
            <p className="text-center text-gray-500">ูุฑุฌู ููุก ุงูุญููู ุงูุชุงููุฉ ูุฅููุงู ุทูุจู.</p>
            
            {isSubmitting && (
              <div className="absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-10">
                <div className="text-center p-4 rounded-md shadow-lg bg-white">
                  <div className="animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"></div>
                  <p className="text-lg font-medium text-gray-700">ุฌุงุฑู ุฅุฑุณุงู ุทูุจู...</p>
                </div>
              </div>
            )}

            {/* ุชูุงุตูู ุงูุฑุตูุฏ */}
            <div>
              <h2 className="text-xl font-semibold text-gray-800 mb-4">ุชูุงุตูู ุงูุฑุตูุฏ ุงููุทููุจ</h2>
              <div className="p-4 bg-gray-50 rounded-lg">
                <label htmlFor="balance_type" className="block text-sm font-medium text-gray-700 mb-1">ููุน ุงูุฑุตูุฏ ุงููุฑุงุฏ ุดุญูู</label>
                <select
                  id="balance_type"
                  name="balance_type"
                  value={formData.balance_type}
                  onChange={handleInputChange}
                  required
                  className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"
                >
                  <option value="">ุงุฎุชุฑ...</option>
                  <option value="crypto">๐ฑ ุนููุฉ ุฑูููุฉ</option>
                  <option value="wallet">๐ ูุญูุธุฉ ุฅููุชุฑูููุฉ</option>
                </select>
              </div>
              {formData.balance_type === 'crypto' && renderCryptoSection()}
              {formData.balance_type === 'wallet' && renderWalletSection()}
            </div>

            {/* ุชูุงุตูู ุงูุทูุจ */}
            <div>
              <h2 className="text-xl font-semibold text-gray-800 mb-4">ุชูุงุตูู ุงูุทูุจ</h2>
              <div className="space-y-4">
                <div className="p-4 bg-gray-50 rounded-lg">
                  <label htmlFor="amount_requested" className="block text-sm font-medium text-gray-700 mb-1">๐ฐ ุงููููุฉ ุงููุทููุจุฉ</label>
                  <p className="text-xs text-gray-500 mb-2">ุฃุฏุฎู ุงููููุฉ ุงูุชู ุชุฑุบุจ ุจุงุณุชูุงููุง (ูุซูุงู: 100)</p>
                  <input
                    type="number"
                    id="amount_requested"
                    name="amount_requested"
                    value={formData.amount_requested}
                    onChange={handleInputChange}
                    required
                    className="mt-1 block w-full pl-3 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                  />
                </div>
                <div className="p-4 bg-gray-50 rounded-lg">
                  <label htmlFor="service_fee_value" className="block text-sm font-medium text-gray-700 mb-1">๐ธ ุฑุณูู ุงูุฎุฏูุฉ</label>
                  <p className="text-xs text-gray-500 mb-2">ูุชู ุงุญุชุณุงุจูุง ุชููุงุฆููุง ุจูุงุกู ุนูู ุงููููุฉ.</p>
                  <input
                    type="text"
                    id="service_fee_value"
                    name="service_fee_value"
                    value={formData.service_fee_value.toFixed(2)}
                    readOnly
                    className="mt-1 block w-full pl-3 pr-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-200 cursor-not-allowed sm:text-sm"
                  />
                </div>
                <div className="p-4 bg-gray-50 rounded-lg">
                  <label htmlFor="receiver_address" className="block text-sm font-medium text-gray-700 mb-1">๐ฅ ุนููุงู ุงูุงุณุชูุงู</label>
                  <p className="text-xs text-gray-500 mb-2">ุฃุฏุฎู ุนููุงู ุงููุญูุธุฉ ุฃู ุนููุงู ุงูุนููุฉ ุงูุฑูููุฉ ุจุฏูุฉ</p>
                  <textarea
                    id="receiver_address"
                    name="receiver_address"
                    rows="3"
                    value={formData.receiver_address}
                    onChange={handleInputChange}
                    required
                    className="mt-1 block w-full pl-3 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                  ></textarea>
                </div>
                <div className="p-4 bg-gray-50 rounded-lg">
                  <label htmlFor="notes" className="block text-sm font-medium text-gray-700 mb-1">๐ ููุงุญุธุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)</label>
                  <textarea
                    id="notes"
                    name="notes"
                    rows="2"
                    value={formData.notes}
                    onChange={handleInputChange}
                    className="mt-1 block w-full pl-3 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                  ></textarea>
                </div>
              </div>
            </div>

            {/* ุชูุงุตูู ุงูุฏูุน */}
            <div>
              <h2 className="text-xl font-semibold text-gray-800 mb-4">ุชูุงุตูู ุงูุฏูุน</h2>
              <div className="space-y-4">
                <div className="p-4 bg-gray-50 rounded-lg">
                  <label htmlFor="payment_method" className="block text-sm font-medium text-gray-700 mb-1">๐ฆ ุทุฑููุฉ ุงูุฏูุน ุงูููุถูุฉ</label>
                  <select
                    id="payment_method"
                    name="payment_method"
                    value={formData.payment_method}
                    onChange={handleInputChange}
                    required
                    className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"
                  >
                    <option value="">ุงุฎุชุฑ...</option>
                    <option value="ุจูู ุงูุฑุงุฌุญู">ุจูู ุงูุฑุงุฌุญู</option>
                    <option value="STC Pay">STC Pay</option>
                    <option value="ุจูู ุงูุฃููู">ุจูู ุงูุฃููู</option>
                    <option value="ุญูุงูุฉ ูุญููุฉ">ุญูุงูุฉ ูุญููุฉ</option>
                    <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
                  </select>
                </div>
                <div className="p-4 bg-gray-50 rounded-lg">
                  <label htmlFor="payment_currency" className="block text-sm font-medium text-gray-700 mb-1">๐ฑ ุงูุนููุฉ ุงูุชู ุณุชุฏูุน ุจูุง</label>
                  <select
                    id="payment_currency"
                    name="payment_currency"
                    value={formData.payment_currency}
                    onChange={handleInputChange}
                    required
                    className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"
                  >
                    <option value="">ุงุฎุชุฑ...</option>
                    <option value="ุฑูุงู ุณุนูุฏู">ุฑูุงู ุณุนูุฏู</option>
                    <option value="ุฑูุงู ูููู ุดูุงู">ุฑูุงู ูููู ุดูุงู</option>
                    <option value="ุฑูุงู ูููู ุฌููุจ">ุฑูุงู ูููู ุฌููุจ</option>
                    <option value="ุฏููุงุฑ ุฃูุฑููู">ุฏููุงุฑ ุฃูุฑููู</option>
                  </select>
                </div>
                <div className="p-4 bg-blue-100 rounded-lg">
                  <label htmlFor="final_amount_due" className="block text-sm font-bold text-blue-800 mb-1">๐ข ุงููุจูุบ ุงูููุงุฆู ุงููุทููุจ ุฏูุนู</label>
                  <p className="text-xs text-blue-700 mb-2">
                    ุณุนุฑ ุงูุตุฑู ูู: {formData.payment_currency === 'ุฏููุงุฑ ุฃูุฑููู' ? '1.00' : (exchangeRates[formData.payment_currency] || '...')} (ููุงุจู 1 ุฏููุงุฑ).
                  </p>
                  <div className="mt-1 flex items-center">
                    <span className="text-2xl font-extrabold text-blue-900 mr-2">
                      {formData.final_amount_due_usd.toFixed(2)}
                    </span>
                    <span className="text-lg text-blue-800">
                      ุฏููุงุฑ ุฃูุฑููู
                    </span>
                  </div>
                  {formData.payment_currency !== 'ุฏููุงุฑ ุฃูุฑููู' && (
                    <div className="mt-1 flex items-center">
                      <span className="text-2xl font-extrabold text-blue-900 mr-2">
                        {formData.final_amount_due_converted.toFixed(2)}
                      </span>
                      <span className="text-lg text-blue-800">
                        {formData.payment_currency}
                      </span>
                    </div>
                  )}
                </div>
              </div>
            </div>

            <button
              type="submit"
              disabled={isSubmitting}
              className="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out"
            >
              {isSubmitting ? 'ุฌุงุฑู ุงูุฅุฑุณุงู...' : 'ุฅุฑุณุงู ุงูุทูุจ'}
            </button>
          </form>
        </div>
      );
    };

    // ูุฐุง ุงูุณุทุฑ ูููู ุจุจุฏุก ุชุดุบูู ุชุทุจูู React ูุฑุจุทู ุจุนูุตุฑ HTML ุฐู ุงููุนุฑู "root".
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
